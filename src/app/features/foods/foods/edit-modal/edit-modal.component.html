<div *ngIf="isFoodLoading" style="height: 100%;">
    <mat-spinner style="margin: 3em auto;"></mat-spinner>
</div>
<div *ngIf="!isFoodLoading" style="text-align: center; height: auto;">
    <h1>{{ title }}</h1>
    <mat-dialog-content style="overflow-y: scroll;">
        <form [formGroup]="foodForm">
            <mat-form-field style="width: 90%; margin: 0 0 2em 0;">
                <mat-label>{{ parameters.nameLabel }}</mat-label>
                <input type="text" matInput formControlName="name">
                <app-form-errors [control]="foodForm.get('name')"></app-form-errors>
            </mat-form-field>
            <mat-form-field>
                <mat-label>{{ parameters.categoriesLabel }}</mat-label>
                <mat-select multiple formControlName="categories">
                    <mat-option *ngFor="let foodCategory of data.combo" [value]="foodCategory.id">
                        {{ foodCategory.name }}
                    </mat-option>
                </mat-select>
                <app-form-errors [control]="foodForm.get('categories')"></app-form-errors>
            </mat-form-field>

            <div formGroupName="referenceMeasurements">
                <h2>{{ parameters.referenceMeasurementsTitle }}</h2>
                <mat-form-field style="width: 90%; margin: 0 0 2em 0;">
                    <mat-label>{{ parameters.referenceMassInGramsLabel }}</mat-label>
                    <input type="number" step="0.1" matInput formControlName="referenceMassInGrams">
                </mat-form-field>
                <mat-form-field style="width: 90%; margin: 0 0 2em 0;">
                    <mat-label>{{ parameters.referenceVolumeInMililitersLabel }}</mat-label>
                    <input type="number" step="0.1" matInput formControlName="referenceVolumeInMililiters">
                </mat-form-field>
                <mat-form-field style="width: 90%; margin: 0 0 2em 0;">
                    <mat-label>{{ parameters.referenceUnitsLabel }}</mat-label>
                    <input type="number" step="0.1" matInput formControlName="referenceUnits">
                </mat-form-field>
            </div>

            <div formGroupName="fattyAcidsAndCholesterol">
                <h2>{{ parameters.fattyAcidsAndCholesterolTitle }}</h2>
                <mat-form-field style="width: 90%; margin: 0 0 2em 0;">
                    <mat-label>{{ parameters.saturatedFatLabel }}</mat-label>
                    <input type="number" step="0.01" matInput formControlName="saturatedFat">
                </mat-form-field>
                <mat-form-field style="width: 90%; margin: 0 0 2em 0;">
                    <mat-label>{{ parameters.monounsaturatedFatLabel }}</mat-label>
                    <input type="number" step="0.01" matInput formControlName="monounsaturatedFat">
                </mat-form-field>
                <mat-form-field style="width: 90%; margin: 0 0 2em 0;">
                    <mat-label>{{ parameters.polyunsaturatedFatLabel }}</mat-label>
                    <input type="number" step="0.01" matInput formControlName="polyunsaturatedFat">
                </mat-form-field>
                <mat-form-field style="width: 90%; margin: 0 0 2em 0;">
                    <mat-label>{{ parameters.cholesterolLabel }}</mat-label>
                    <input type="number" step="0.01" matInput formControlName="cholesterol">
                </mat-form-field>
            </div>

            <div formGroupName="macronutrients">
                <h2>{{ parameters.macronutrientsTitle }}</h2>
                <mat-form-field style="width: 90%; margin: 0 0 2em 0;">
                    <mat-label>{{ parameters.caloriesLabel }}</mat-label>
                    <input type="number" step="0.01" matInput formControlName="calories">
                </mat-form-field>
                <mat-form-field style="width: 90%; margin: 0 0 2em 0;">
                    <mat-label>{{ parameters.proteinLabel }}</mat-label>
                    <input type="number" step="0.01" matInput formControlName="protein">
                </mat-form-field>
                <mat-form-field style="width: 90%; margin: 0 0 2em 0;">
                    <mat-label>{{ parameters.carbohydratesLabel }}</mat-label>
                    <input type="number" step="0.01" matInput formControlName="carbohydrates">
                </mat-form-field>
                <mat-form-field style="width: 90%; margin: 0 0 2em 0;">
                    <mat-label>{{ parameters.greaseLabel }}</mat-label>
                    <input type="number" step="0.01" matInput formControlName="grease">
                </mat-form-field>
                <mat-form-field style="width: 90%; margin: 0 0 2em 0;">
                    <mat-label>{{ parameters.fiberLabel }}</mat-label>
                    <input type="number" step="0.01" matInput formControlName="fiber">
                </mat-form-field>
            </div>

            <div formGroupName="minerals">
                <h2>{{ parameters.mineralsTitle }}</h2>
                <mat-form-field style="width: 90%; margin: 0 0 2em 0;">
                    <mat-label>{{ parameters.calciumLabel }}</mat-label>
                    <input type="number" step="0.01" matInput formControlName="calcium">
                </mat-form-field>
                <mat-form-field style="width: 90%; margin: 0 0 2em 0;">
                    <mat-label>{{ parameters.ironLabel }}</mat-label>
                    <input type="number" step="0.01" matInput formControlName="iron">
                </mat-form-field>
                <mat-form-field style="width: 90%; margin: 0 0 2em 0;">
                    <mat-label>{{ parameters.sodiumLabel }}</mat-label>
                    <input type="number" step="0.01" matInput formControlName="sodium">
                </mat-form-field>
                <mat-form-field style="width: 90%; margin: 0 0 2em 0;">
                    <mat-label>{{ parameters.phosphorusLabel }}</mat-label>
                    <input type="number" step="0.01" matInput formControlName="phosphorus">
                </mat-form-field>
                <mat-form-field style="width: 90%; margin: 0 0 2em 0;">
                    <mat-label>{{ parameters.iodoLabel }}</mat-label>
                    <input type="number" step="0.01" matInput formControlName="iodo">
                </mat-form-field>
                <mat-form-field style="width: 90%; margin: 0 0 2em 0;">
                    <mat-label>{{ parameters.zincLabel }}</mat-label>
                    <input type="number" step="0.01" matInput formControlName="zinc">
                </mat-form-field>
                <mat-form-field style="width: 90%; margin: 0 0 2em 0;">
                    <mat-label>{{ parameters.manganeseLabel }}</mat-label>
                    <input type="number" step="0.01" matInput formControlName="manganese">
                </mat-form-field>
                <mat-form-field style="width: 90%; margin: 0 0 2em 0;">
                    <mat-label>{{ parameters.potassiumLabel }}</mat-label>
                    <input type="number" step="0.01" matInput formControlName="potassium">
                </mat-form-field>
            </div>

            <div formGroupName="vitamins">
                <h2>{{ parameters.vitaminsTitle }}</h2>
                <mat-form-field style="width: 90%; margin: 0 0 2em 0;">
                    <mat-label>{{ parameters.thiaminLabel }}</mat-label>
                    <input type="number" step="0.01" matInput formControlName="thiamin">
                </mat-form-field>
                <mat-form-field style="width: 90%; margin: 0 0 2em 0;">
                    <mat-label>{{ parameters.riboflavinLabel }}</mat-label>
                    <input type="number" step="0.01" matInput formControlName="riboflavin">
                </mat-form-field>
                <mat-form-field style="width: 90%; margin: 0 0 2em 0;">
                    <mat-label>{{ parameters.niacinLabel }}</mat-label>
                    <input type="number" step="0.01" matInput formControlName="niacin">
                </mat-form-field>
                <mat-form-field style="width: 90%; margin: 0 0 2em 0;">
                    <mat-label>{{ parameters.folatesLabel }}</mat-label>
                    <input type="number" step="0.01" matInput formControlName="folates">
                </mat-form-field>
                <mat-form-field style="width: 90%; margin: 0 0 2em 0;">
                    <mat-label>{{ parameters.vitaminB12Label }}</mat-label>
                    <input type="number" step="0.01" matInput formControlName="vitaminB12">
                </mat-form-field>
                <mat-form-field style="width: 90%; margin: 0 0 2em 0;">
                    <mat-label>{{ parameters.vitaminCLabel }}</mat-label>
                    <input type="number" step="0.01" matInput formControlName="vitaminC">
                </mat-form-field>
                <mat-form-field style="width: 90%; margin: 0 0 2em 0;">
                    <mat-label>{{ parameters.vitaminALabel }}</mat-label>
                    <input type="number" step="0.01" matInput formControlName="vitaminA">
                </mat-form-field>
            </div>
        </form>
    </mat-dialog-content>
    <mat-dialog-actions style="float: right;">
        <button mat-raised-button [disabled]="foodForm.invalid" color="primary" (click)="submit()">
            Guargar
            <mat-icon>save</mat-icon>
        </button>
        <button mat-raised-button color="warn" (click)="close()">
            Cancelar
            <mat-icon>cancel</mat-icon>
        </button>
    </mat-dialog-actions>
</div>